<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
    <title>Truth Lens Pro</title>
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#0d1117">
    <style>
        #splash {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #0d1117; display: flex; flex-direction: column;
            align-items: center; justify-content: center; z-index: 9999;
            transition: opacity 1s ease;
        }
        .scanner {
            width: 80px; height: 80px; border: 3px solid #00f2fe;
            border-radius: 12px; position: relative; overflow: hidden;
        }
        .scanner::after {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 3px;
            background: #00f2fe; box-shadow: 0 0 15px #00f2fe;
            animation: scan 2s infinite linear;
        }
        @keyframes scan { 0% { top: 0; } 100% { top: 100%; } }
        .loading-text { color: #00f2fe; margin-top: 20px; font-family: sans-serif; font-size: 12px; letter-spacing: 2px; }
    </style>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.39.0/build/stlite.css" />
</head>
<body>
    <div id="splash">
        <div class="scanner"></div>
        <div class="loading-text">BOOTING FORENSIC ENGINE...</div>
    </div>
    <div id="root"></div>
    <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.39.0/build/stlite.js"></script>
    <script>
        stlite.mount({
            requirements: ["google-genai", "groq", "pillow"],
            entrypoint: "app.py",
            files: {
                "app.py": `
import streamlit as st
from google import genai
from groq import Groq
from PIL import Image
import io

# HIDE SPLASH SCREEN
st.components.v1.html("""<script>
    window.parent.document.getElementById('splash').style.opacity = '0';
    setTimeout(() => window.parent.document.getElementById('splash').remove(), 1000);
</script>""", height=0)

st.title("üõ°Ô∏è TRUTH LENS PRO")

with st.sidebar:
    st.header("Settings")
    g_key = st.text_input("Gemini API Key", type="password")
    gr_key = st.text_input("Groq API Key", type="password")

uploaded_file = st.file_uploader("Upload Screenshot", type=['jpg', 'jpeg', 'png'])

if uploaded_file:
    img = Image.open(uploaded_file)
    st.image(img)
    if st.button("üîç ANALYZE"):
        if not g_key or not gr_key:
            st.error("Missing Keys!")
        else:
            with st.status("Scanning..."):
                client_g = genai.Client(api_key=g_key)
                res_v = client_g.models.generate_content(model="gemini-2.0-flash", contents=["Analyze for fraud", img])
                client_gr = Groq(api_key=gr_key)
                verdict = client_gr.chat.completions.create(
                    messages=[{"role": "user", "content": res_v.text}],
                    model="llama-3.3-70b-versatile"
                )
                st.write(verdict.choices[0].message.content)
`
            }
        }, document.getElementById("root"));
    </script>
</body>
</html>
